# 物品


### 物品匹配*

匹配物品信息(仅适用槽位等部分场景)

- 语法：match.匹配类型('匹配内容',是否完整匹配)
- 返回：Boolean

::: code-group

```yaml [lore]
condition:
    # 匹配物品lore,支持使用;间隔多条匹配内容
    # 模糊匹配
    - match.lore('戒指;项链') else '{prefix}§7该物品无法放入'
    # 完整匹配
    - match.lore('§7类型:§e沙漠宝珠',true) else '{prefix}§7该物品无法放入'
```

```yaml [name]
condition:
  - match.name('戒指') else '{prefix}§7该物品无法放入'
```

```yaml [type]
condition:
  # 匹配物品Type，不区分大小写
  - match.type('SWORD') else '{prefix}§7该物品无法放入'
```

```yaml [物品库]
# 可在左侧导航栏查看已适配物品库
condition:
  - match.item('mm','戒指') else '{prefix}§7该物品无法放入'
```
:::



### 物品统计*

统计 玩家 背包内符合的物品数量

- 语法：物品统计('类型','匹配内容',完整匹配)
- 返回：Int

::: code-group

```yaml [lore]
# 匹配物品lore
condition:
  - 物品统计('lore','测试材料')>=10 else '{prefix}§7所需物品不满足'
```

```yaml [name]
# 匹配物品name
condition:
  - 物品统计('name','测试材料',false)>=10 else '{prefix}§7所需物品不满足'
```

```yaml [物品库]
# 根据物品库统计物品数量
# 可在左侧导航栏查看已适配物品库
condition:
  #检测玩家背包是否有10个聚宝盆解锁
  - 物品统计('mm','聚宝盆解锁')>=10 else '{prefix}§7所需物品不满足'
```
:::

### 物品给予*

给予 玩家 背包内符合的物品数量，已适配灵魂空间的自动拾取

- 语法：物品给予('物品库','物品Id',数量)

```yaml
# 可在左侧导航栏查看已适配物品库
action:
  - 物品给予('mm','聚宝盆解锁',10)
```

### 物品扣除*

扣除 玩家 背包内符合的物品数量

- 语法：物品扣除('类型','匹配内容',数量,完整匹配)

::: code-group

```yaml [lore]
# 匹配物品lore
action:
  - 物品扣除('lore','聚宝盆解锁',10,false)
```

```yaml [name]
# 匹配物品name
action:
  - 物品扣除('name','聚宝盆解锁',10,false)
```

```yaml [物品库]
# 可在左侧导航栏查看已适配物品库
action:
  - 物品扣除('mm','聚宝盆解锁',10)
```
:::

## 物品操作器

### 词条匹配('关键词')

物品词条是否包含关键词,等效于`match.lore()`

```yaml
condition:
  # 判断物品是否包含“攻击力”
  - "词条匹配('攻击力')"
action:
  # 判断 “攻击力” 词条是否存在，不存在则添加词条
  - "!词条匹配('攻击力') && 词条添加('攻击力: 1000')"
```


### 词条添加('内容',行数)

向物品中添加词条。`行数` 参数为可选，默认添加到最后一行

```yaml
action:
  # 添加至最后一行
  - "词条添加('攻击力: 1000')"
  # 词条不存在则加至最后一行
  - "!词条匹配('攻击力') && 词条添加('攻击力: 1000')"
  # 添加至 '待强化' 词条下一行
  - "词条添加('攻击力: 1000',词条定位('待强化')+1)"
```

### 词条设置('内容',行数)

设置(覆盖)物品指定行的词条，行数从 0 起计,若超出范围则添加词条

```yaml
action:
  # 设置第五行词条
  - "词条设置('攻击力: 1000',5)"
```


### 词条删除('关键词',删除次数)

删除物品包含关键词的词条。`删除次数` 可选，默认全删。

```yaml
action:
  # 删除强化初始词条
  - "词条删除('待强化')"
  # 例如出现了5次“打孔失败“,只想保留一条，则删除5-1=4个词条，
  - "词条删除('打孔失败',词条统计('打孔失败')-1)"
```



### 反向删除('关键词',删除次数)

从底部开始删除物品包含关键词的词条。`删除次数` 可选，默认删除最后一条

```yaml
action:
  # 删除物品词条中最底部的攻击力词条
  - "反向删除('攻击力')"
```

### 删除指定行(行数)

删除物品指定行的词条。行数从 0 起计,若超出范围则删除最后一行

```yaml
action:
  # 删除第一行
  - "删除指定行(1)"
  # 未填行数参数则删除最后一行
  - "删除指定行()"
```


### 词条统计('关键词')

统计关键词在物品词条中出现的次数，每行只统计一次

```yaml
condition:
  # 判断物品是否包含“攻击力”
  - "词条统计('攻击力')"
action:
  # 判断 “攻击力” 词条是否存在，不存在则添加词条
  - "词条统计('无') && 词条添加('攻击力: 1000')"
```

### 词条定位('关键词')

查找物品中含指定关键词的词条行号，行数从 0 起计。若词条不存在，返回 -1

```yaml 
action:
  # 获取 “攻击力” 词条行号（如返回 5）
  - "词条定位('攻击力')"
  # 判断 “攻击力” 词条是否存在，不存在则添加词条
  - "词条定位('攻击力')<0 && 词条添加('攻击力: 1000')"
```


### 数值修改('词条','数值或计算公式')

修改物品词条(属性)中的数值

```yaml 
action:
  # 把包含“攻击力”的词条数值修改为当前值的 1.1 倍，n 代表当前数值
  - "数值修改('攻击力','n*1.1')"
  # # 将包含“生命上限”的词条数值修改为固定值 1000
  - "数值修改('生命上线','1000')"
```

### 数值获取('匹配内容',多行匹配)

获取物品中的数值，使用;间隔多条匹配内容

```yaml
数值获取('等级')
数值获取('攻击力',true)
数值获取('攻击力;物理攻击',true)
```

判断玩家等级是否符合物品需求

```yaml
condition:
  - 数值获取('等级') >= %player_level% else '{prefix}§7不满足物品等级需求'
```


### 词条替换('替换前','替换后',替换次数)

替换物品词条中的关键词。`替换次数` 可选，默认全部替换

```yaml
action:
  # 将词条中的“红宝石孔”全替换为“绿宝石孔”
  - "词条替换('红宝石孔','绿宝石孔')"
  # 第一个“攻击力”词条替换为“生命上限”
  - "词条替换('攻击力','生命上限',1)"
```


### 整行替换('关键词','文本',替换次数)

包含关键词的那行词条整行替换为新文本。`替换次数` 可选，默认替换1次

```yaml
action:
  # “待强化”词条替换为“强化等级”
  - "词条替换('待强化','强化等级: 1')"
```


### 获取物品名()

```yaml
condition:
  - "获取物品名()=='恶魔士兵主手'"
```


### 设置物品名('物品名')

```yaml
action:
  - "设置物品名('恶魔士兵主手')"
```


### 获取物品类型()

获取物品类型，结果为全大写

```yaml
condition:
  - "获取物品类型()=='APPLE'"
```


### 设置物品类型('类型')

```yaml
action:
  # 设置为苹果
  - "设置物品类型('APPLE')"
```


### 数量增加(数值)

增加选中物品的数量

```yaml 
action:
  # 增加物品数量
  - "数量增加(1)"
```

### 数量扣除(数值)

扣除选中物品的数量

```yaml 
action:
  # 减少物品数量
  - "数量扣除(1)"
```

### 获取NBT('节点')

获取物品NBT节点信息

```yaml
condition:
  - "获取NBT('强化方案')=='默认强化'"
```


### 设置NBT('节点','内容')

设置物品NBT节点信息

```yaml
action:
  - "设置NBT('强化方案','默认强化')"
```

