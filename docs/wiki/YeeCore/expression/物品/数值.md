---
outline: [ 2, 2 ]
---

# 数值操作

为强化、洗炼等需要操作物品词条的场景，封装了高效、灵活的数值操作表达式。

## 数值解析  <Badge type="info" text="物品" />

用于解析文本中的数值，支持不同格式的数值类型。

### 参数

| 说明 | 数据类型   | 默认值 |
 |----|--------|-----|
| 文本 | string | -   |
| 索引 | string | -   |

### 索引

数值类型
| **类型** | **说明** | **示例**   |
|--------|--------|----------|
| `num`  | 普通数值 | 100, 200 |
| `rb`   | 圆括号 | (+10)    |
| `sb`   | 方括号 | [+10]    |
| `cb`   | 大括号 | \{+10\} |
| `ab`   | 角括号 | <+10>    |
| `bm`   | 书名号 | 【+10】 |

索引格式：` 类型+ 序号 `（例如 `num3` 表示第三个普通数值）

### 示例

```javascript
// 例如 词条为：攻击力: 100-200 (+50)
物品.数值解析('攻击力', 'num1') // 返回：100
物品.数值解析('攻击力', 'num2') // 返回：200
物品.数值解析('攻击力', 'rb1')  // 返回：50
```

## 数值操作  <Badge type="info" text="物品" />

用于按照指定操作语句，对文本中的数值进行运算和调整。

### 参数

| 说明      | 数据类型   | 默认值 |
 |---------|--------|-----|
| 关键词     | string | -   |
| 操作语句    | string | -   |
| 操作语句... | string | -   |

操作语句

- 格式：`索引 = 运算公式`
- 占位符：`n`：索引获取到的当前数值，`r`：初始数值

常用操作

```plaintext
num1 = n * 1.25   // 第一个普通数值 num1 乘以 1.25
rb1  = n * 1.25   // 第一个圆括号内的数值 rb1 乘以 1.25
```

### 示例

例 词条：攻击力: 100-200 (+50)

仅修改 num1（第一个普通数值）

```javascript
物品.数值操作('攻击力', 'num1=n*1.25') // 修改后：攻击力: 125-200 (+50)
```

同时修改 num1, num2, rb1

```javascript
物品.数值操作('攻击力', 'num1=n*1.25', 'num2=n*1.25', 'rb1=n*1.25') // 修改后：攻击力: 125-250 (+62.5)
```

- 通过 `数值解析` 获取具体数值
- 结合 `数值操作` 进行数值调整