# 物品操作器

### 词条匹配('关键词')

物品词条是否包含关键词,等效于`match.lore()`

```yaml
condition:
  # 判断物品是否包含“攻击力”
  - "词条匹配('攻击力')"
action:
  # 判断 “攻击力” 词条是否存在，不存在则添加词条
  - "!词条匹配('攻击力') && 词条添加('攻击力: 1000')"
```


### 词条添加('内容',行数)

向物品中添加词条。`行数` 参数为可选，默认添加到最后一行

```yaml
action:
  # 添加至最后一行
  - "词条添加('攻击力: 1000')"
  # 词条不存在则加至最后一行
  - "!词条匹配('攻击力') && 词条添加('攻击力: 1000')"
  # 添加至 '待强化' 词条下一行
  - "词条添加('攻击力: 1000',词条定位('待强化')+1)"
```

### 词条设置('内容',行数)

设置(覆盖)物品指定行的词条，行数从 0 起计,若超出范围则添加词条

```yaml
action:
  # 设置第五行词条
  - "词条设置('攻击力: 1000',5)"
```


### 词条删除('关键词',删除次数)

删除物品包含关键词的词条。`删除次数` 可选，默认全删。

```yaml
action:
  # 删除强化初始词条
  - "词条删除('待强化')"
  # 例如出现了5次“打孔失败“,只想保留一条，则删除5-1=4个词条，
  - "词条删除('打孔失败',词条统计('打孔失败')-1)"
```



### 反向删除('关键词',删除次数)

从底部开始删除物品包含关键词的词条。`删除次数` 可选，默认删除最后一条

```yaml
action:
  # 删除物品词条中最底部的攻击力词条
  - "反向删除('攻击力')"
```

### 删除指定行(行数)

删除物品指定行的词条。行数从 0 起计,若超出范围则删除最后一行

```yaml
action:
  # 删除第一行
  - "删除指定行(1)"
  # 未填行数参数则删除最后一行
  - "删除指定行()"
```


### 词条统计('关键词')

统计关键词在物品词条中出现的次数，每行只统计一次

```yaml
condition:
  # 判断物品是否包含“攻击力”
  - "词条统计('攻击力')"
action:
  # 判断 “攻击力” 词条是否存在，不存在则添加词条
  - "词条统计('无') && 词条添加('攻击力: 1000')"
```

### 词条定位('关键词')

查找物品中含指定关键词的词条行号，行数从 0 起计。若词条不存在，返回 -1

```yaml 
action:
  # 获取 “攻击力” 词条的行号（如返回 5）
  - "词条定位('攻击力')"
  # 获取物品中第二个包含 “攻击力” 词条的行号
  - "词条定位('攻击力',2)"
  # 判断 “攻击力” 词条是否存在，不存在则添加词条
  - "词条定位('攻击力')<0 && 词条添加('攻击力: 1000')"
```

### 词条获取('关键词')

获取物品中含指定关键词的整行词条

```yaml 
action:
  # 获取指定行,行数从 0 起计
  - "词条获取(0)"
  # 搭配 `词条定位` 获取包含指定关键词的词条
  - "词条获取(词条定位('攻击力'))"
```


### 数值修改('词条','数值或计算公式')

修改物品词条(属性)中的数值

```yaml 
action:
  # 把包含“攻击力”的词条数值修改为当前值的 1.1 倍，n 代表当前数值
  - "数值修改('攻击力','n*1.1')"
  # # 将包含“生命上限”的词条数值修改为固定值 1000
  - "数值修改('生命上线','1000')"
```

### 数值获取('匹配内容',多行匹配)

获取物品中的数值，使用;间隔多条匹配内容

```yaml
数值获取('等级')
数值获取('攻击力',true)
数值获取('攻击力;物理攻击',true)
```

判断玩家等级是否符合物品需求

```yaml
condition:
  - 数值获取('等级') >= %player_level% else '{prefix}§7不满足物品等级需求'
```


### 词条替换('替换前','替换后',替换次数)

替换物品词条中的关键词。`替换次数` 可选，默认全部替换

```yaml
action:
  # 将词条中的“红宝石孔”全替换为“绿宝石孔”
  - "词条替换('红宝石孔','绿宝石孔')"
  # 第一个“攻击力”词条替换为“生命上限”
  - "词条替换('攻击力','生命上限',1)"
```


### 整行替换('关键词','文本',替换次数)

包含关键词的那行词条整行替换为新文本。`替换次数` 可选，默认替换1次

```yaml
action:
  # “待强化”词条替换为“强化等级”
  - "词条替换('待强化','强化等级: 1')"
```


### 获取物品名()

```yaml
condition:
  - "获取物品名()=='恶魔士兵主手'"
```


### 设置物品名('物品名')

```yaml
action:
  - "设置物品名('恶魔士兵主手')"
```


### 获取物品类型()

获取物品类型，结果为全大写

```yaml
condition:
  - "获取物品类型()=='APPLE'"
```


### 设置物品类型('类型')

```yaml
action:
  # 设置为苹果
  - "设置物品类型('APPLE')"
```


### 增加数量(数值)

增加选中物品的数量

```yaml 
action:
  # 增加物品数量
  - "增加数量(1)"
```

### 扣除数量(数值)

扣除选中物品的数量

```yaml 
action:
  # 减少物品数量
  - "扣除数量(1)"
```

### 设置数量(数值)

设置选中物品的数量

```yaml 
action:
  # 设置物品数量
  - "设置数量(1)"
```

### 获取NBT('节点')

获取物品NBT节点信息

```yaml
condition:
  - "获取NBT('强化方案')=='默认强化'"
```


### 设置NBT('节点','内容')

设置物品NBT节点信息

```yaml
action:
  - "设置NBT('强化方案','默认强化')"
```


### 物品替换('参数')

替换选中物品

```javascript
// 替换为反序列化后的物品，可参考 `序列化物品()` 表达式
物品替换('H4sIAAAAAAAAAE2PPU......X/tDmaZABAAA=')

// 替换为物品库物品，格式：物品库 物品编号 数量
物品替换('mm 恶魔士兵核心 1')
```



### 序列化物品()

将 ItemStack 转换为 Base64 字符串,便于存储或搭配 `替换物品()` 使用

```javascript
// 默认序列化选中物品
序列化物品() 
//返回 H4sIAAAAAAAAAE2PPU4DMRBGh80mCkIIBAUSBRUNBd6KhigtKFJCIgUJpC2QswyLs/7DOxslFJyBG3ABzsJJoIATYGeDiAvP2H7zPvn9C5qlg0PjcjapikIQq0hIJgy7cdxadD+jy8/vPdOMYKMPDcUtwU5/ymc8CWAy4LYzt15xlhnFcmNyicy3ymhfpMSMWE+pivhEooePx+gEl+IZ7y+MU7BaEUQpxAUuSoL9tPZLrvNkOJl6RSeF1ozLCssneIF4biv3h7GAsRX2+nH7tlueyAhgbr22QRB1uwQxLSz6opB4FRSt+vFo7d9Cz1CTcQvWI1Rj4llB0BoNr3vDq2UsLPfG/3xo2gSbwXpaJ2xZQ8Lo5Wk9qB2cA8+Fu22CAyU0Zo4/0Lk0Or8ryaHO6fEX/tDmaZABAAA=

// 序列化物品库物品，格式：物品库 物品编号 数量
序列化物品('mm 恶魔士兵核心 1')
```

